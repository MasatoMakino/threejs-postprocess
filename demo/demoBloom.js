(()=>{"use strict";var e,t={889:(e,t,i)=>{var r=i(75),s=i(12);class n{static initScene(){return new r.xsS}static initLight(e){const t=new r.Mig(16777215,1);return e.add(t),t}static initCamera(e,t,i,s=1,n=400){const a=new r.cPb(45,t/i,s,n);return a.position.set(0,0,100),a.updateMatrixWorld(!1),e.add(a),a}static initControl(e,t){let i;t&&(i=t.domElement);const r=new s.z(e,i);return r.update(),r}static initRenderer(e,t,i){i=Object.assign({color:0,id:"webgl-canvas",antialias:!0},i);const s=new r.CP7({canvas:document.getElementById(i.id),antialias:i.antialias});return s.setClearColor(new r.Ilk(i.color)),s.setSize(e,t),s.setPixelRatio(window.devicePixelRatio),s}static initHelper(e){const t=new r.y8_(30);e.add(t)}}var a=i(42),o=i(438);class l extends o.xC{constructor(){super(...arguments),this.enabled=!0}}var d=i(163);class h{constructor(e,t,i){this._composers=[],this.render=e=>{let t;t=e instanceof d.NH?e.delta:e,this._composers.forEach((e=>{e.enabled&&(e.onBeforeRender&&e.onBeforeRender(t),e.render(t),e.onAfterRender&&e.onAfterRender(t))}))},this.renderer=i,this.scene=e,this.camera=t}get composers(){return this._composers}addComposer(e,t){const i=h.getComposer(e,this.renderer,{scene:this.scene,camera:this.camera,renderPass:t});return this._composers.push(i),i}static getComposer(e,t,i){c.init(i);const r=new l(t);return r.addPass(i.renderPass),e.forEach((e=>{r.addPass(e)})),r}setSize(e,t){this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(e,t),this._composers.forEach((i=>{i.setSize(e,t)}))}getSize(){return this.renderer.getSize(new r.FM8)}}class c{static init(e){null==e.renderPass&&(e.renderPass=new a.C(e.scene,e.camera))}}class u{constructor(){this.vertexShader="\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n  ",this.initUniform()}initUniform(){this.uniforms={tDiffuse:{value:null}}}}var m=i(571);class p extends m.T{get tDiffuse(){return this.uniforms.tDiffuse.value}set tDiffuse(e){this.uniforms.tDiffuse.value=e}}class g extends u{constructor(){super(),this.fragmentShader="    \nuniform sampler2D tDiffuse;\nuniform sampler2D mixTexture;\nvarying vec2 vUv;\nvec4 getTexture( sampler2D map ) {\n    return texture2D( map , vUv );\n}\nvoid main() {\n    gl_FragColor = ( getTexture( tDiffuse ) + vec4( 1.0 ) * getTexture( mixTexture ) );\n}"}initUniform(){super.initUniform(),this.uniforms=r.rDY.merge([this.uniforms,{mixTexture:{value:null}}])}}class f extends p{get mixTexture(){return this.uniforms.mixTexture.value}set mixTexture(e){this.uniforms.mixTexture.value=e}constructor(e){super(new g),this.mixTexture=e}}var v=i(275);class w{updateMaterial(e){this.original=e,this.copyMaterialArray(),this.darkenMaterialArray(this.dark)}copyMaterialArray(){this.isClone()?this.cloneToDark():this.copyToDark()}isClone(){const e=this.getHeadMaterial(this.dark),t=this.getHeadMaterial(this.original);return null==e||e.type!==t.type}getHeadMaterial(e){return Array.isArray(e)?e[0]:e}copyToDark(){Array.isArray(this.original)?this.dark.forEach(((e,t)=>{e.copy(this.original[t])})):this.dark.copy(this.original)}cloneToDark(){const e=Array.isArray(this.original);this.dark=e?this.original.map((e=>e.clone())):this.original.clone()}darkenMaterialArray(e){Array.isArray(e)?e.forEach((e=>{w.darkenMaterial(e)})):w.darkenMaterial(e)}static darkenMaterial(e){null!=e.color&&e.color.setHex(0),null!=e.shininess&&(e.shininess=0),null!=e.specular&&e.specular.setHex(0),null!=e.emissive&&e.emissive.setHex(0)}}class x{constructor(e){this.darkenNonBloomed=()=>{this.scene.traverseVisible(this.switchToDarken)},this.restoreMaterial=()=>{this.scene.traverseVisible(this.switchToOriginalMaterial)},this.switchToDarken=e=>{if(!this.isDarken(e))return;null==e.userData.materialStorage&&(e.userData.materialStorage=new w);const t=e.userData.materialStorage,i=e;t.updateMaterial(i.material),i.material=t.dark},this.switchToOriginalMaterial=e=>{this.isDarken(e)&&(e.material=e.userData.materialStorage.original)},this.scene=e,this.layers=new r.S9g,this.layers.set(b.BLOOM)}isDarken(e){return(null!=e.isMesh||null!=e.isLine)&&!this.layers.test(e.layers)}}class b extends l{constructor(e,t,i){super(t),this.switcher=new x(e);const s=t.getSize(new r.FM8);this.bloomPass=new v.m(s,1.5,.4,.4),this.renderToScreen=!1,c.init(i),this.addPass(i.renderPass),this.addPass(this.bloomPass),this.onBeforeRender=this.switcher.darkenNonBloomed,this.onAfterRender=this.switcher.restoreMaterial}get result(){return this.renderTarget2.texture}}b.ENTIRE=0,b.BLOOM=30;var y=i(694),k=i(998);class M{constructor(){const e=n.initScene();e.fog=new r.ybr(0,80,160),n.initLight(e);const t=n.initCamera(e,640,480),i=n.initRenderer(640,480);n.initControl(t,i),n.initHelper(e),this.initObject(e),this.postRenderer=new h(e,t,i);const s=this.postRenderer.getSize(),o=new a.C(e,t);this.bloom=new b(e,i,{renderPass:o});const l=new f(this.bloom.result),c=new k.d(s.width,s.height);this.postRenderer.composers.push(this.bloom),this.postRenderer.addComposer([l,c],o),d.Fz.on(d.M9.tick,this.postRenderer.render),this.initGUI()}initObject(e){const t=new r.cek(16777215,3,0,2);t.position.set(0,0,0),e.add(t);const i=new r.xG9(t,2,0);e.add(i);const s=new r.xo$(10,32,32),n=new r.YBo({fog:void 0!==e.fog});n.color=new r.Ilk(16737894),this.center=new r.Kj0(s,n),this.center.layers.enable(b.BLOOM),e.add(this.center),this.satellite=new r.Kj0(s,n.clone()),this.satellite.position.set(30,0,0),e.add(this.satellite);const a=new r.Kj0(s,n);a.position.set(-30,0,0),e.add(a)}initGUI(){const e=new y.XS;this.initGUIBloom(e),this.initGUISatellite(e),this.initPassGUI(e),this.initGUIResolution(e)}initGUIBloom(e){const t={bloomCenter:!0,bloomSatellite:!1},i=(e,t)=>{t?e.layers.enable(b.BLOOM):e.layers.disable(b.BLOOM)},r=e.addFolder("bloom");r.add(t,"bloomCenter").onChange((e=>{i(this.center,e)})),r.add(t,"bloomSatellite").onChange((e=>{i(this.satellite,e)})),r.open()}initGUISatellite(e){const t=e.addFolder("Satellite");t.add(this.satellite.material,"transparent"),t.add(this.satellite.material,"opacity",0,1),t.open()}initPassGUI(e){const t=e.addFolder("renderer");t.add(this.bloom.bloomPass,"threshold",0,1),t.add(this.bloom.bloomPass,"strength",0,4),t.add(this.bloom.bloomPass,"radius",0,1),t.open()}initGUIResolution(e){const t=this.postRenderer.getSize(),i={width:t.width,height:t.height},r=()=>{this.postRenderer.setSize(i.width,i.height)},s=e.addFolder("Resolution");s.add(i,"width",2,1920).step(1).onChange(r),s.add(i,"height",2,1080).step(1).onChange(r),s.open()}}window.onload=()=>{new M}}},i={};function r(e){var s=i[e];if(void 0!==s)return s.exports;var n=i[e]={exports:{}};return t[e](n,n.exports,r),n.exports}r.m=t,e=[],r.O=(t,i,s,n)=>{if(!i){var a=1/0;for(h=0;h<e.length;h++){for(var[i,s,n]=e[h],o=!0,l=0;l<i.length;l++)(!1&n||a>=n)&&Object.keys(r.O).every((e=>r.O[e](i[l])))?i.splice(l--,1):(o=!1,n<a&&(a=n));if(o){e.splice(h--,1);var d=s();void 0!==d&&(t=d)}}return t}n=n||0;for(var h=e.length;h>0&&e[h-1][2]>n;h--)e[h]=e[h-1];e[h]=[i,s,n]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.j=391,(()=>{var e={391:0};r.O.j=t=>0===e[t];var t=(t,i)=>{var s,n,[a,o,l]=i,d=0;if(a.some((t=>0!==e[t]))){for(s in o)r.o(o,s)&&(r.m[s]=o[s]);if(l)var h=l(r)}for(t&&t(i);d<a.length;d++)n=a[d],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(h)},i=self.webpackChunkthreejs_postprocess=self.webpackChunkthreejs_postprocess||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var s=r.O(void 0,[736],(()=>r(889)));s=r.O(s)})();