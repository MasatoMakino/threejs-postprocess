(()=>{"use strict";var e,r={358:(e,r,t)=>{var s=t(753),i=t(580);class n{static initScene(){return new s.Z58}static initLight(e,r=Math.PI){const t=new s.$p8(16777215,r);return e.add(t),t}static initCamera(e,r,t,i=1,n=400){const a=new s.ubm(45,r/t,i,n);return a.position.set(0,0,100),a.updateMatrixWorld(!1),e.add(a),a}static initControl(e,r){let t;r&&(t=r.domElement);const s=new i.N(e,t);return s.update(),s}static initRenderer(e,r,t){t=Object.assign({color:0,id:"webgl-canvas",antialias:!0},t);const i=new s.JeP({canvas:document.getElementById(t.id),antialias:t.antialias});return i.setClearColor(new s.Q1f(t.color)),i.setSize(e,r),i.setPixelRatio(window.devicePixelRatio),i}static initHelper(e){const r=new s.IzY(30);e.add(r)}}var a=t(638),o=t(968),l=t(296),c=t(596);class u extends c.s{constructor(){super(...arguments),this.enabled=!0}}var d=t(993);class h{get composers(){return this._composers}constructor(e,r,t){this._composers=[],this.render=e=>{let r;r=e instanceof d.J?e.delta:e,this._composers.forEach((e=>{e.enabled&&(e.onBeforeRender&&e.onBeforeRender(r),e.render(r),e.onAfterRender&&e.onAfterRender(r))}))},this.renderer=t,this.scene=e,this.camera=r}createScreenRenderingComposer(e,r){const t=h.getComposer(e,this.renderer,{scene:this.scene,camera:this.camera,renderPass:r});return this._composers.push(t),t}static getComposer(e,r,t){f.init(t);const s=new u(r);return s.addPass(t.renderPass),e.forEach((e=>{s.addPass(e)})),s.addPass(new l.X),s}setSize(e,r){this.camera.aspect=e/r,this.camera.updateProjectionMatrix(),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(e,r),this._composers.forEach((t=>{t.setSize(e,r)}))}getSize(){return this.renderer.getSize(new s.I9Y)}}class f{static init(e){null==e.renderPass&&(e.renderPass=new o.A(e.scene,e.camera))}}class m{constructor(){this.vertexShader="\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n  ",this.initUniform()}initUniform(){this.uniforms={tDiffuse:{value:null}}}}var v=t(45);class p extends v.p{constructor(e,r){super(e,r)}get tDiffuse(){return this.uniforms.tDiffuse.value}set tDiffuse(e){this.uniforms.tDiffuse.value=e}}class g extends m{constructor(){super(),this.fragmentShader="\nuniform sampler2D tDiffuse;\nuniform float rate;\nuniform float radiusInner;\nuniform float radiusOuter;\nuniform vec3 color;\nvarying vec2 vUv;\n\nvoid main() {\n  float distance = length( vUv - 0.5 )*2.0;\n  distance = smoothstep( radiusInner, radiusOuter, distance);  \n  float shift = rate * distance * 0.01;\n\n  vec4 original = texture2D( tDiffuse, vUv );\n  vec3 result = mix( original.rgb, color, shift);\n\n  gl_FragColor = vec4( result , original.a );\n}\n  "}initUniform(){super.initUniform(),this.uniforms=s.LlO.merge([this.uniforms,{rate:{value:5},radiusInner:{value:.75},radiusOuter:{value:Math.sqrt(2)},color:{value:new s.Q1f(0,0,0)}}])}}class w extends p{get rate(){return this.uniforms.rate.value}set rate(e){this.uniforms.rate.value=e}get radiusInner(){return this.uniforms.radiusInner.value}set radiusInner(e){this.uniforms.radiusInner.value=e}get radiusOuter(){return this.uniforms.radiusOuter.value}set radiusOuter(e){this.uniforms.radiusOuter.value=e}get color(){return this.uniforms.color.value}set color(e){this.uniforms.color.value=e}constructor(){super(new g)}}var y=t(208);class O{updateMaterial(e){this.original=e,this.copyMaterialArray(),this.darkenMaterialArray(this.dark)}copyMaterialArray(){this.isClone()?this.cloneToDark():this.copyToDark()}isClone(){const e=this.getHeadMaterial(this.dark),r=this.getHeadMaterial(this.original);return null==e||e.type!==r.type}getHeadMaterial(e){return Array.isArray(e)?e[0]:e}copyToDark(){Array.isArray(this.original)?this.dark.forEach(((e,r)=>{e.copy(this.original[r])})):this.dark.copy(this.original)}cloneToDark(){const e=Array.isArray(this.original);this.dark=e?this.original.map((e=>e.clone())):this.original.clone()}darkenMaterialArray(e){Array.isArray(e)?e.forEach((e=>{O.darkenMaterial(e)})):O.darkenMaterial(e)}static darkenMaterial(e){null!=e.color&&e.color.setHex(0),null!=e.shininess&&(e.shininess=0),null!=e.specular&&e.specular.setHex(0),null!=e.emissive&&e.emissive.setHex(0)}}class k{constructor(e){this.darkenNonBloomed=()=>{this.scene.traverseVisible(this.switchToDarken)},this.restoreMaterial=()=>{this.scene.traverseVisible(this.switchToOriginalMaterial)},this.switchToDarken=e=>{if(!this.isDarken(e))return;null==e.userData.materialStorage&&(e.userData.materialStorage=new O);const r=e.userData.materialStorage,t=e;r.updateMaterial(t.material),t.material=r.dark},this.switchToOriginalMaterial=e=>{this.isDarken(e)&&(e.material=e.userData.materialStorage.original)},this.scene=e,this.layers=new s.zgK,this.layers.set(x.BLOOM)}isDarken(e){return(null!=e.isMesh||null!=e.isLine)&&!this.layers.test(e.layers)}}class x extends u{constructor(e,r,t){super(r),this.switcher=new k(e);const i=r.getSize(new s.I9Y);this.bloomPass=new y.C(i,1.5,.4,.4),this.renderToScreen=!1,f.init(t),this.addPass(t.renderPass),this.addPass(this.bloomPass),this.onBeforeRender=this.switcher.darkenNonBloomed,this.onAfterRender=this.switcher.restoreMaterial}get result(){return this.renderTarget2.texture}}x.ENTIRE=0,x.BLOOM=30,t(161);class M{constructor(){const e=n.initScene();e.fog=new s.jUj(16777215,80,160),n.initLight(e);const r=n.initCamera(e,640,480),t=n.initRenderer(640,480,{color:16777215});n.initControl(r,t),n.initHelper(e),this.initObject(e);const i=new h(e,r,t),a=new w;i.createScreenRenderingComposer([a]),d.w.on("tick",i.render),this.initGUI(a)}initObject(e){const r=new s.Gu$(10,16,16),t=new s.G_z({fog:void 0!==e.fog});t.color=new s.Q1f(16737894);const i=new s.eaF(r,t);e.add(i);const n=new s.eaF(r,t.clone());n.position.set(30,0,0),e.add(n);const a=new s.eaF(r,t);a.position.set(-30,0,0),e.add(a)}initGUI(e){const r=new a.Ay;this.initGUIEffect(r,e)}initGUIEffect(e,r){const t={color:r.color.getHex()},s=e.addFolder("PeripheralLightPass");s.add(r,"rate",0,10),s.add(r,"radiusInner",0,3),s.add(r,"radiusOuter",0,3),s.addColor(t,"color").onChange((e=>{r.color.setHex(e)})),s.open()}}window.onload=()=>{new M}}},t={};function s(e){var i=t[e];if(void 0!==i)return i.exports;var n=t[e]={exports:{}};return r[e](n,n.exports,s),n.exports}s.m=r,e=[],s.O=(r,t,i,n)=>{if(!t){var a=1/0;for(u=0;u<e.length;u++){for(var[t,i,n]=e[u],o=!0,l=0;l<t.length;l++)(!1&n||a>=n)&&Object.keys(s.O).every((e=>s.O[e](t[l])))?t.splice(l--,1):(o=!1,n<a&&(a=n));if(o){e.splice(u--,1);var c=i();void 0!==c&&(r=c)}}return r}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[t,i,n]},s.d=(e,r)=>{for(var t in r)s.o(r,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},s.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={526:0};s.O.j=r=>0===e[r];var r=(r,t)=>{var i,n,[a,o,l]=t,c=0;if(a.some((r=>0!==e[r]))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(l)var u=l(s)}for(r&&r(t);c<a.length;c++)n=a[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(u)},t=self.webpackChunkthreejs_postprocess=self.webpackChunkthreejs_postprocess||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var i=s.O(void 0,[121],(()=>s(358)));i=s.O(i)})();